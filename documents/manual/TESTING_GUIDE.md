# 자동 새로고침 설정 테스트 가이드

## 📋 구현 완료된 기능

### ✅ 1. 화면보호기 지속 시간 확장 (10초)
- 대시보드 자동 새로고침 시 화면보호기가 10초 동안 표시됩니다
- 로고가 떠다니는 애니메이션 효과가 10초 동안 유지됩니다

### ✅ 2. 시스템 설정에서 새로고침 시간 지정 가능
- 관리자 > 시스템 등록 메뉴에서 자동 새로고침 간격 설정 가능
- 1~60분 사이의 값으로 설정 가능 (기본값: 5분)
- localStorage에 저장되어 브라우저를 닫아도 설정이 유지됩니다

---

## 🧪 테스트 방법

### **접속 URL**
```
https://3000-i3oloko346uog7d7oo8v5-de59bda9.sandbox.novita.ai
```

### **테스트 시나리오 1: 화면보호기 지속 시간 확인**

1. **로그인**
   - 강사 계정으로 로그인
   - 대시보드에 접근

2. **자동 새로고침 대기**
   - 현재 설정된 시간만큼 대기 (기본값: 5분)
   - 헤더 오른쪽의 카운트다운 타이머 확인
   - `0:00`이 되면 자동으로 새로고침 시작

3. **화면보호기 확인**
   - ✅ 화면이 흐려지고 배경이 어두워짐
   - ✅ 중앙에 로고가 나타남
   - ✅ 로고가 떠다니는 애니메이션 (float, bounce, rotate)
   - ✅ "데이터 새로고침 중..." 텍스트 표시
   - ⏱️ **정확히 10초 동안 표시됨**

4. **데이터 로드 확인**
   - 10초 후 화면보호기가 사라짐
   - 대시보드 데이터가 업데이트됨
   - 다음 새로고침 카운트다운 시작

---

### **테스트 시나리오 2: 새로고침 시간 설정**

1. **시스템 설정 접근**
   - 좌측 메뉴에서 "관리자" 클릭
   - "시스템 등록" 클릭

2. **현재 설정 확인**
   - "대시보드 자동 새로고침 시간" 필드 확인
   - 현재 저장된 값이 표시됨 (기본값: 5분)

3. **새로운 시간 설정**
   - 테스트를 위해 `1` 입력 (1분)
   - "저장" 버튼 클릭

4. **설정 저장 확인**
   - ✅ "시스템 설정이 저장되었습니다!" 메시지
   - ✅ "대시보드 자동 새로고침: 1분마다" 표시
   - ✅ "(10초간 화면보호기 표시)" 안내 문구

5. **타이머 재시작 확인**
   - 콘솔 로그 확인 (F12 개발자 도구)
   - `🔄 자동 새로고침 타이머 재시작...` 메시지
   - `⏰ 대시보드 자동 새로고침 시작 (1분 간격)` 메시지

6. **새로운 간격으로 자동 새로고침 테스트**
   - 헤더의 카운트다운이 1분 (1:00)부터 시작
   - 1분 후 자동으로 새로고침 실행
   - 10초 동안 화면보호기 표시
   - 데이터 업데이트 완료

---

### **테스트 시나리오 3: 설정 지속성 확인**

1. **브라우저 새로고침**
   - F5 또는 Ctrl+R로 페이지 새로고침
   - 다시 로그인

2. **시스템 설정 재확인**
   - "관리자" > "시스템 등록" 접근
   - "대시보드 자동 새로고침 시간" 필드 확인
   - ✅ 이전에 저장한 값이 그대로 유지됨 (예: 1분)

3. **브라우저 종료 후 재접속**
   - 브라우저 완전히 종료
   - 다시 접속하여 로그인
   - 시스템 설정 확인
   - ✅ localStorage에 저장되어 설정이 유지됨

---

### **테스트 시나리오 4: 입력 검증**

1. **유효하지 않은 값 입력 테스트**
   - "시스템 등록" 메뉴 접근
   - "대시보드 자동 새로고침 시간"에 다음 값들 입력 및 저장:

   **테스트 케이스:**
   - `0` 입력 → ⚠️ 경고 메시지, 기본값 5분으로 설정
   - `61` 입력 → ⚠️ 경고 메시지, 기본값 5분으로 설정
   - `-5` 입력 → ⚠️ 경고 메시지, 기본값 5분으로 설정
   - 빈 값 → ⚠️ 경고 메시지, 기본값 5분으로 설정

2. **유효한 값 입력 테스트**
   - `1` → ✅ 정상 저장, 1분마다 새로고침
   - `30` → ✅ 정상 저장, 30분마다 새로고침
   - `60` → ✅ 정상 저장, 60분마다 새로고침

---

## 🔍 콘솔 로그 확인 사항

### **시스템 설정 로드 시**
```
✅ 자동 새로고침 시간 로드: 5분
✅ 폼 값 설정 완료: {
  title: "바이오헬스교육관리시스템",
  subtitle1: "보건복지부(한국보건산업진흥원), KDT, 우송대학교산학협력단",
  subtitle2: "바이오헬스아카데미 올인원테크 이노베이터",
  logo: "/woosong-logo.png",
  refreshInterval: "5분"
}
```

### **시스템 설정 저장 시**
```
📝 저장할 데이터: {
  system_title: "바이오헬스교육관리시스템",
  system_subtitle1: "보건복지부(한국보건산업진흥원), KDT, 우송대학교산학협력단",
  system_subtitle2: "바이오헬스아카데미 올인원테크 이노베이터",
  logo_url: "/woosong-logo.png",
  dashboard_refresh_interval: "1분"
}
💾 자동 새로고침 시간 저장: 1분
🔄 자동 새로고침 타이머 재시작...
⏰ 대시보드 자동 새로고침 시작 (1분 간격)
```

### **자동 새로고침 실행 시**
```
🔄 자동 새로고침 실행...
(10초 동안 화면보호기 표시)
✅ 대시보드 데이터 로드 완료
```

---

## 📌 주요 개선 사항

### **1. 화면보호기 지속 시간**
- **이전**: 너무 빠르게 사라짐
- **현재**: 정확히 10초 동안 표시
- **구현**: `await new Promise(resolve => setTimeout(resolve, 10000))`

### **2. 자동 새로고침 간격 설정**
- **이전**: 고정된 5분 간격
- **현재**: 사용자가 1~60분 사이에서 자유롭게 설정
- **저장**: localStorage를 사용하여 브라우저 종료 후에도 유지

### **3. 실시간 타이머 재시작**
- **이전**: 설정 변경 시 브라우저 새로고침 필요
- **현재**: 설정 저장 즉시 타이머 재시작, 별도의 새로고침 불필요

### **4. 사용자 피드백**
- 저장 성공 메시지에 설정된 새로고침 간격 표시
- 화면보호기 지속 시간 안내 (10초)
- 입력 검증 및 오류 처리

---

## 🎯 권장 설정

### **사용 환경별 권장 시간**

1. **데모/테스트 환경**
   - **권장**: 1~2분
   - **이유**: 빠른 테스트 및 검증

2. **일반 사무실 환경**
   - **권장**: 5분 (기본값)
   - **이유**: 적절한 업데이트 빈도와 서버 부하 균형

3. **안정적인 운영 환경**
   - **권장**: 10~15분
   - **이유**: 서버 부하 최소화, 데이터 변경이 빈번하지 않은 경우

4. **대형 디스플레이/대시보드**
   - **권장**: 3~5분
   - **이유**: 실시간성 중요, 시각적 변화 필요

---

## 🐛 문제 해결

### **화면보호기가 표시되지 않는 경우**
1. F12 개발자 도구 > Console 탭 확인
2. `showScreensaver()` 함수 호출 확인
3. CSS 충돌 여부 확인

### **설정이 저장되지 않는 경우**
1. 브라우저의 localStorage 활성화 확인
2. 개인정보 보호 모드(시크릿 모드)가 아닌지 확인
3. Console에서 `localStorage.getItem('dashboard_refresh_interval')` 실행

### **타이머가 재시작되지 않는 경우**
1. Console에서 `stopDashboardAutoRefresh()` 실행 확인
2. `startDashboardAutoRefresh()` 실행 확인
3. 페이지 새로고침 후 재시도

---

## 📝 변경 이력

### **2025-11-25**
- ✅ 화면보호기 지속 시간 10초로 확장
- ✅ 시스템 설정에 새로고침 간격 설정 UI 추가
- ✅ localStorage를 사용한 설정 지속성 구현
- ✅ 입력 검증 (1~60분) 추가
- ✅ 실시간 타이머 재시작 기능 구현
- ✅ 사용자 피드백 메시지 개선

---

## ✨ 다음 단계 (선택 사항)

### **추가 개선 가능 항목**
1. **프리셋 버튼**: "1분", "5분", "10분", "30분" 빠른 선택 버튼
2. **화면보호기 커스터마이징**: 애니메이션 스타일 선택
3. **알림 설정**: 새로고침 전 알림 옵션
4. **일정 기반 새로고침**: 특정 시간대에만 활성화
5. **데이터 변경 감지**: 실제 데이터 변경 시에만 새로고침

---

**테스트 완료 후 피드백 부탁드립니다!** 🙏
