# 📤 파일 업로드 가이드 (간단 버전)

## ✅ 업로드 가능 용량

### **최대 100MB까지 업로드 가능합니다**

| 파일 크기 | 상태 | 처리 방식 |
|---------|------|----------|
| 0 ~ 10MB | ✅ 정상 업로드 | 그대로 업로드 |
| 10MB ~ 20MB | ✅ 정상 업로드 | 이미지는 자동 압축 (1600px/70%) |
| 20MB ~ 100MB | ✅ 정상 업로드 | 이미지는 자동 압축 (1280px/60%) |
| 100MB 초과 | ❌ 업로드 불가 | "파일 크기는 100MB를 초과할 수 없습니다" 에러 |

### 💡 참고
- **이미지 파일**: 20MB 이상일 경우 자동으로 압축되어 평균 **83% 용량 감소**
- **일반 문서**: 압축 없이 원본 그대로 업로드

---

## 📝 한글 파일명 처리

### **한글 파일명도 업로드 가능하지만, 서버에서는 영문으로 변환됩니다**

#### 🔄 변환 과정

```
업로드 전: 학생자료.pdf
    ↓
서버 저장: 20251219_a1b2c3d4_____. pdf
    ↓
다운로드: 학생자료.pdf (원본 이름으로 복원)
```

#### 📋 예시

| 원본 파일명 | 서버 저장명 | 사용자가 보는 이름 |
|------------|-----------|----------------|
| `프로젝트보고서.pdf` | `20251219_xxxxx_______.pdf` | `프로젝트보고서.pdf` ✅ |
| `상담일지_김철수.hwp` | `20251219_xxxxx___________.hwp` | `상담일지_김철수.hwp` ✅ |
| `Team_Photo.jpg` | `20251219_xxxxx_Team_Photo.jpg` | `Team_Photo.jpg` ✅ |

#### ✅ 결론
- **한글 파일명 그대로 업로드 가능**
- **화면에서는 원본 이름으로 표시**
- **다운로드 시 원본 이름으로 저장**
- 서버 내부적으로만 영문으로 변환 (사용자는 모름)

---

## 📂 지원되는 파일 형식

### ✅ 업로드 가능 파일

#### 1️⃣ **이미지**
- JPG, JPEG, PNG, GIF, BMP, WEBP

#### 2️⃣ **문서**
- **PDF**: PDF 문서
- **한글**: HWP 파일
- **MS Office**: 
  - Word (DOC, DOCX)
  - Excel (XLS, XLSX)
  - PowerPoint (PPT, PPTX)
- **텍스트**: TXT

---

## 🚨 문제 해결

### ❌ "파일 크기는 100MB를 초과할 수 없습니다"
**원인**: 파일이 100MB보다 큼  
**해결**: 
1. 파일을 압축하거나 분할
2. 불필요한 내용 제거
3. 이미지 품질 낮춤 (이미지의 경우)

### ❌ "허용되지 않는 파일 형식입니다"
**원인**: 지원하지 않는 파일 형식  
**해결**: 
- 위의 "지원되는 파일 형식" 참고
- 파일을 지원 형식으로 변환

### ❌ 500 Internal Server Error (이미지 다운로드/썸네일)
**원인**: FTP 서버 연결 또는 파일 경로 문제  
**해결**:
1. 백엔드 서버 재시작
2. 최신 코드로 업데이트 (`git pull`)
3. FTP 서버 연결 확인

---

## 💻 로컬 적용 방법

### 1️⃣ 최신 코드 받기
```bash
cd "G:\내 드라이브\11. DEV_23\51. Python_mp3등\BH2025_WOWU"
git pull origin main
```

### 2️⃣ 서버 재시작
#### Windows에서 PM2 사용 (권장)
```bash
# 기존 서버 중지
pm2 stop all
pm2 delete all

# 새로 시작
start-servers.bat
```

#### 또는 수동 실행
**터미널 1 (백엔드)**
```bash
cd backend
venv\Scripts\activate
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**터미널 2 (프론트엔드)**
```bash
node frontend/proxy-server.cjs
```

### 3️⃣ 브라우저에서 확인
1. 브라우저 캐시 지우기: `Ctrl + Shift + R` 또는 `Ctrl + F5`
2. `http://localhost:3000` 접속
3. 학생 관리 → 파일 업로드 테스트

---

## 📊 업로드 테스트 체크리스트

- [ ] 10MB 미만 파일 업로드
- [ ] 20MB 이상 이미지 업로드 (자동 압축 확인)
- [ ] 100MB에 가까운 파일 업로드
- [ ] 한글 파일명으로 업로드
- [ ] 다운로드 시 원본 파일명 확인
- [ ] PDF 미리보기
- [ ] 이미지 썸네일 확인

---

## 🔗 더 자세한 정보

- **상세 기술 문서**: `UPLOAD_CAPACITY_INFO.md`
- **로컬 개발 가이드**: `LOCAL_DEVELOPMENT.md`
- **전체 프로젝트 설명**: `README.md`
- **GitHub**: https://github.com/EmmettHwang/BH2025_WOWU

---

## 📞 추가 도움이 필요하신가요?

문제가 계속되면 다음 정보를 제공해주세요:
1. 업로드하려는 파일 크기와 형식
2. 에러 메시지 전체 내용
3. 백엔드 터미널의 에러 로그
4. 브라우저 콘솔 에러 (F12 → Console 탭)
